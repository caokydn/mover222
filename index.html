<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Junior English - Game</title>
<style>
/* (gi·ªØ nguy√™n to√†n b·ªô CSS nh∆∞ b·∫°n g·ª≠i) */
*{box-sizing:border-box;margin:0;padding:0;}
body {font-family: Comic Sans MS, sans-serif;background: linear-gradient(135deg,#fcd5ce,#fef9c3);overflow-x:hidden;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;}
#brand{width:100%;text-align:center;font-size:1.5em;color:#6b5b95;background:linear-gradient(90deg,#fcd5ce,#fef9c3);padding:10px 0;font-weight:bold;position:sticky;top:0;z-index:20;box-shadow:0 2px 5px rgba(0,0,0,0.2);}
#welcomeScreen {position:absolute;top:0; left:0; width:100%; height:100%;display:flex; align-items:center; justify-content:center;flex-direction:column;background:linear-gradient(135deg,#fcd34d,#fbbf24);z-index:10;}
#welcomeScreen h2{font-size:3em;color:#f472b6;margin-bottom:20px;text-align:center;}
#welcomeScreen input{padding:12px; font-size:20px; border-radius:12px; border:2px solid #ccc; margin-bottom:20px; width:250px; text-align:center;}
#welcomeScreen button{padding:15px 40px; font-size:20px; border:none; border-radius:12px;background:linear-gradient(90deg,#38bdf8,#0ea5e9); color:#0f172a; font-weight:bold; cursor:pointer;box-shadow:0 5px 15px rgba(0,0,0,0.3);transition:0.3s;}
#welcomeScreen button:hover{transform:translateY(-3px); box-shadow:0 8px 20px rgba(0,0,0,0.4);}
#gameArea{display:none;width:100%; max-width:450px; background:linear-gradient(135deg, #FF69B4, #8A2BE2);border-radius:20px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,0.3);color:#1f2937;text-align:center;margin-top:30px;}
#scoreBoard{font-size:24px; color:#fff; margin-bottom:10px; font-weight:bold;}
#image{ object-fit: contain; max-width: 90%; width:auto; max-height:30vh;  border:5px solid #ffcc00; border-radius:15px; margin:12px auto; display:block;}
.options{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-top:15px;}
.option-btn{
  width:100%;
  border-radius:15px;
  cursor:pointer;
  transition:0.3s;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:12px;
  font-size:22px;
  font-weight:bold;
  color:#000;
}
.option-btn:hover{
  transform:scale(1.05);
}
.option-btn.disabled{
  background:#ff6666 !important;
  cursor:not-allowed;
  opacity:0.7;
  border:2px solid #333;
}

#message{margin-top:20px;font-size:24px;font-weight:bold; min-height:32px;}
#endScreen{display:none;width:100%; max-width:700px;background:linear-gradient(135deg,#a5b4fc,#c7d2fe);border-radius:20px;padding:20px;text-align:center;color:#1f2937;margin-top:20px;}
#endScreen .line1 { font-size:2.2em; color:#f472b6; margin-bottom:8px; }
#endScreen .line2 { font-size:1.8em; margin-bottom:8px; font-weight:bold; }
#endScreen .line3 { font-size:1.6em; color:#34d399; margin-bottom:12px; }
#playAgainBtn{padding:12px 30px; font-size:18px; border-radius:12px;background:linear-gradient(90deg,#38bdf8,#0ea5e9); color:#0f172a; border:none; cursor:pointer; font-weight:bold;}
#playAgainBtn:hover{transform:translateY(-3px);}
#balloonCanvas{position:absolute; top:0; left:0; pointer-events:none; z-index:0; width:100%; height:100%;}
@media (max-width:600px){#image{ width:90%; }.option-btn{ font-size:18px; padding:10px; }#welcomeScreen h2{ font-size:2em; }#welcomeScreen input{ width:70%; }}
</style>
</head>
<body>

<div id="brand">üéâJunior English - 113 L√™ Tr·ªçng T·∫•n, ƒê√† N·∫µng - 0935.994359üéâ</div>
<audio id="bg-music" src="sound/background music.mp3" loop></audio>

<!-- Welcome -->
<div id="welcomeScreen">
  <h2>üéâ Junior English ch√†o m·ª´ng c√°c em üéâ</h2>
  <input type="text" id="studentName" placeholder="Nh·∫≠p t√™n em...">
  <button id="startBtn">B·∫Øt ƒë·∫ßu</button>
</div>

<!-- Game Area -->
<div id="gameArea">
  <div id="scoreBoard">ƒêi·ªÉm: 0 / 0</div>
  <img id="image" src="" alt="Vocabulary Image">
  <div class="options" id="options"></div>
  <div id="message"></div>
</div>

<!-- End Screen -->
<div id="endScreen">
  <div class="line1">üéâ Junior English ch√∫c m·ª´ng üéâ</div>
  <div class="line2" id="endName"></div>
  <div class="line3" id="endScore"></div>
  <button id="playAgainBtn">Ch∆°i l·∫°i</button>
</div>

<canvas id="balloonCanvas"></canvas>

<script>
/* ========== D·ªØ li·ªáu & c·∫•u h√¨nh ========== */
const juniorword = ['building','cap','helmet','map','noisy','quick','quiet','racket','road','shopping centre','slow','tall','thousand','ticket'];
let junior = [...juniorword];
const IMAGE_FOLDER = "flashcard/";
let currentWord = "";
let score = 0;
const total = juniorword.length;
let studentName = "";
let currentWasWrong = false;

/* Nh·∫°c n·ªÅn */
const bgMusic = document.getElementById("bg-music");
document.body.addEventListener("click", () => {
  bgMusic.volume = 0.5;
  bgMusic.play().catch(()=>{});
}, { once: true });

/* B√≥ng bay */
const canvas = document.getElementById("balloonCanvas");
const ctx = canvas.getContext("2d");
function resizeCanvas(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
resizeCanvas();
window.addEventListener("resize", resizeCanvas);
let balloons = [];
function createBalloon(){ balloons.push({x: Math.random()*canvas.width,y: canvas.height + 50,radius: 20 + Math.random()*15,color: `hsl(${Math.random()*360},80%,60%)`,speed: 1 + Math.random()*2}); }
function animateBalloons(){ctx.clearRect(0,0,canvas.width,canvas.height);balloons.forEach((b,i) => {b.y -= b.speed;ctx.beginPath();ctx.arc(b.x,b.y,b.radius,0,2*Math.PI);ctx.fillStyle = b.color; ctx.fill();ctx.strokeStyle = "#fff"; ctx.stroke();if(b.y + b.radius < 0) balloons.splice(i,1);});requestAnimationFrame(animateBalloons);}
function launchBalloons(){const interval = setInterval(()=>createBalloon(),200);setTimeout(()=>clearInterval(interval),3000);animateBalloons();}

/* UI */
const startBtn = document.getElementById("startBtn");
const nameInput = document.getElementById("studentName");
const gameArea = document.getElementById("gameArea");
const scoreBoard = document.getElementById("scoreBoard");
const optionsDiv = document.getElementById("options");
const messageEl = document.getElementById("message");
const imageEl = document.getElementById("image");
const endScreen = document.getElementById("endScreen");
const endName = document.getElementById("endName");
const endScore = document.getElementById("endScore");
const playAgainBtn = document.getElementById("playAgainBtn");

startBtn.addEventListener("click", () => {
  const name = nameInput.value.trim();
  if(!name){ alert("Vui l√≤ng nh·∫≠p t√™n tr∆∞·ªõc khi ch∆°i!"); return; }
  studentName = name;
  document.getElementById("welcomeScreen").style.display = "none";
  gameArea.style.display = "block";
  score = 0;
  junior = [...juniorword];
  updateScore();
  loadRound();
});

// Update score
function updateScore(){ scoreBoard.textContent = `ƒêi·ªÉm: ${score} / ${total}`; }

// Shuffle
function shuffle(arr){for(let i = arr.length-1; i>0; i--){const j = Math.floor(Math.random()*(i+1));[arr[i], arr[j]] = [arr[j], arr[i]];}return arr;}

// √Çm thanh ƒë√∫ng/sai
function playSound(type){
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.connect(gain);
  gain.connect(ctx.destination);
  if(type === "correct"){
    osc.type = "sine"; 
    osc.frequency.value = 800;
    gain.gain.value = 0.2;
    osc.start();
    osc.stop(ctx.currentTime + 0.2);
  } else if(type === "wrong"){
    osc.type = "sawtooth"; 
    osc.frequency.value = 150;
    gain.gain.value = 0.2;
    osc.start();
    osc.stop(ctx.currentTime + 0.4);
  }
}


// H√†m t·∫°o gradient ng·∫´u nhi√™n
function randomGradient() {
  const colors = [
    "#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF",
    "#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF",
    "#FBCFE8","#FDE68A","#BBF7D0","#93C5FD"
  ];
  const c1 = colors[Math.floor(Math.random() * colors.length)];
  const c2 = colors[Math.floor(Math.random() * colors.length)];
  return `linear-gradient(135deg, ${c1}, ${c2})`;
}

/* Load round */
function loadRound(){
  messageEl.textContent = "";
  updateScore();
  if(junior.length === 0){ showEnd(); return; }
  currentWasWrong = false;
  currentWord = junior[Math.floor(Math.random()*junior.length)];
  imageEl.src = IMAGE_FOLDER + currentWord + ".png";
  imageEl.onerror = () => { imageEl.src = IMAGE_FOLDER + currentWord + ".jpg"; };
  let options = [currentWord];
  while(options.length < 4){
    const r = juniorword[Math.floor(Math.random()*juniorword.length)];
    if(!options.includes(r)) options.push(r);
  }
  shuffle(options);
  optionsDiv.innerHTML = "";
options.forEach(opt => {
  const btn = document.createElement("button");
  btn.className = "option-btn";
  btn.textContent = opt;

  // üé® Gradient + vi·ªÅn tr·∫Øng ƒë·∫πp
  btn.style.background = randomGradient();
  btn.style.border = "3px solid white";
  btn.style.boxShadow = "0 0 12px rgba(0,0,0,0.3)";

  btn.onclick = () => checkAnswer(opt, btn);
  optionsDiv.appendChild(btn);
});
}

/* Check answer */
function checkAnswer(selected, btn){
  if(selected === currentWord){
    playSound("correct"); // ‚úÖ √¢m thanh ƒë√∫ng
    if(!currentWasWrong){
      score++;
      updateScore();
    }

  btn.style.background = "linear-gradient(135deg, #bbf7d0, #86efac)";
  btn.style.border = "3px solid #22c55e";
  btn.style.boxShadow = "0 0 15px rgba(34,197,94,0.6)";

    messageEl.textContent = "‚úÖ ƒê√∫ng r·ªìi!";
    messageEl.style.color = "white";
    junior = junior.filter(w => w !== currentWord);
    setTimeout(loadRound, 900);
  } else {
    playSound("wrong"); // ‚ùå √¢m thanh sai
    currentWasWrong = true;
    btn.classList.add("disabled");
    btn.disabled = true;
    messageEl.textContent = "‚ùå Sai r·ªìi, ch·ªçn l·∫°i nh√©";
    messageEl.style.color = "white";
  }
}

/* End screen */
function showEnd(){
  gameArea.style.display = "none";
  endName.textContent = studentName;
  endScore.textContent = `ƒêi·ªÉm: ${score} / ${total}`;
  endScreen.style.display = "block";
  launchBalloons();
}

/* Play again */
playAgainBtn.addEventListener("click", () => {
  endScreen.style.display = "none";
  document.getElementById("welcomeScreen").style.display = "flex";
  nameInput.value = "";
});

/* Khi m·ªü trang */
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("welcomeScreen").style.display = "flex";
  launchBalloons();
});
</script>
</body>
</html>